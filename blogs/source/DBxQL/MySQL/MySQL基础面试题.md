# MySQL 基础面试题

1. 数据库三大范式
   
    作用：使表结构清晰，减少数据冗余，提高查询和存储效率。
   
    范式：
  
    1. 属性的原子性约束：保证每列的原子性，不可再拆分，如不能存在客户信息列，因为可以拆分为客户姓名、客户电话列。
    2. 记录的唯一性约束：保证每个列直接依赖于主键，避免数据易冗余、数据更新异常等问题。
    3. 字段冗余性约束：非主键字段间不能出现传递依赖的关系，不能由其他字段派生出来。
    
    - 优点：可以尽量得减少数据冗余，使得更新快，体积小；
    - 缺点: 对于查询需要多个表进行关联，减少写得效率增加读得效率，更难进行索引优化；

    反范式化：

    - 优点:可以减少表得关联，可以更好得进行索引优化；
    - 缺点:数据冗余以及数据异常，数据得修改需要更多的成本；
   
2. where与having的区别
   
    where中不能写聚合函数，是在分组前筛选出符合条件的行数据；
   
    having是在分组好的数据中筛选出符合条件的组；
   
    执行顺序：on->join->where->group by->having
   
4. 一个sql语句，有那些优化方法？
   
    1. 使用explain查看执行计划，有针对性的优化；
    2. 用EXISTS替代IN、用NOT EXISTS替代NOT IN；
    3. 避免在索引列上使用计算；
    4. 避免在索引列上使用IS NULL和IS NOT NULL；
    5. select * 操作改成具体的列，减少性能开销；
    6. 减少使用子查询、操作符(!=,<>)，否则将放弃索引，进行全表扫描；
    7. 对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引；
    8. 应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描；
    9. 应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描；
    10. where子句中，那些可以过滤掉最大数量记录的条件，必须写在Where子句的末尾；
  
5. 主键、外键和索引的区别？
   
    定义：
  
    - 主键: 唯一标识一条记录，不能有重复的，不允许为空
    - 外键: 表的外键是另一表的主键, 外键可以有重复的, 可以是空值
    - 索引: 该字段没有重复值，但可以有一个空值

    作用：
  
    - 主键：用来保证数据完整性
    - 外键：用来和其他表建立联系用的
    - 索引：是提高查询排序的速度

    个数：
  
    - 主键：主键只能有一个
    - 外键：一个表可以有多个外键
    - 索引：一个表可以有多个唯一索引
   
6. 什么是视图，并试述视图的优点？
   
    视图是从一个或几个基本表导出的表。视图本身不独立存储在数据库中，是一个虚表。而与之相对的基本表，是本身独立存在的表，在 SQL 中一个关系就对应一个表，是一个实表。
   
    视图的优点：
    1. 视图能够简化用户的操作
    2. 视图使用户能以多种角度看待同一数据；
    3. 视图为数据库提供了一定程度的逻辑独立性；
    4. 视图能够对机密数据提供安全保护。

7. 事务并发带来的问题
   
    1. 脏读：当一个事务下在修改数据，而这个数据还未提交，另一个事务读取了此数据，这些数据就是脏数据，所进行的操作可能不正确；
    2. 丢失修改：A修改了T数据，B也来修改了T数据，并且覆盖了A的操作，所以A的修改丢失了；
    3. 不可重复读：B需要多次读取T数据，然后这时A修改了T数据，导致B再次读取的T数据，是不一致的情况；
    4. 幻读：B需要多次读取T数据，然后这时A新增了T数据，导致B再次读取的T数据，发现凭空出现了内容，就像发生了幻觉；
     
8. InnoDB支持的事务的隔离级别有那些？
   
    1. 读未提交：在此级别下，一个事务可以读取另一个事务尚未提交的修改，可能会导致脏读(读到未提交的数据)和不可重复读(同一查询在不同时间点得到不同的结果)问题；
    2. 读已提交：大多数数据库的默认隔离级别。一个事务只能读取已提交的数据。可以避免脏读，但依然可能会出现不可重复读和幻读(同一范围内查询得到不同的行数)问题。
    3. 可重复读：事务在读取数据时，会创建一个快照，确保后续读取的数据与快照一致，不受其他事务的影响。可以避免不可重复读，但仍存在幻读。
    4. 串行化：事务是按顺序执行的，可以避免所有并发问题。但可能会降低数据库的并发性能。

    默认的隔离级别是：可重复读。意味着每个事务可以看到之前事务的结果，而不受其他事务的干扰，并且可以避免不可重复读的问题。

9. 什么是锁？
   
    数据库是一个多用户使用的共享资源。当多个用户并发地存取数据时，在数据库中就会产生多个事务同时存取同一数据的情况。若对并发操作不加控制就可能会读取和存储不正确的数据，破坏数据库的一致性。
  
    加锁是实现数据库并发控制的一个非常重要的技术。当事务在对某个数据对象进行操作前，先向系统发出请求，对其加锁。加锁后事务就对该数据对象有了一定的控制，在该事务释放锁之前，其他的事务不能对此数据对象进行更新操作。
  
    基本锁类型：行级锁、表级锁；

9. SQL语言包括哪几部分？每部分都有哪些操作关键字？
    
    SQL语言包括数据定义(DDL)、数据操纵(DML),数据控制(DCL)和数据查询（DQL）四个部分。

    - 数据定义：create table, alter table, drop table, craete/drop index等
    - 数据操作：select ,insert,update,delete,
    - 数据控制：grant,revoke
    - 数据查询：select

11. 为数据表建立索引的原则有哪些？
    
    在最频繁使用的、用以缩小查询范围的字段上建立索引；
  
    在频繁使用的、需要排序的字段上建立索引；

11. NOW（）和CURRENT_DATE（）有什么区别？
    
    NOW（）命令用于显示当前年份，月份，日期，小时，分钟和秒。
  
    CURRENT_DATE（）仅显示当前年份，月份和日期。

12. 列设置为AUTO INCREMENT时，如果在表中达到最大值，会发生什么情况？
    
    它会停止递增，任何进一步的插入都将产生错误，因为密钥已被使用。

13. 可以使用多少列创建索引？
    
    任何标准表最多可以创建16个索引列。

14. 如何优化DISTINCT？
    
    DISTINCT在所有列上转换为GROUP BY，并与ORDER BY子句结合使用。

15. 表A中，如何显示前50行？
    
    SELECT * FROM A LIMIT 0,50;

16. BLOB和TEXT有什么区别？
    
    BLOB是一个二进制对象，可以容纳可变数量的数据。TEXT是一个不区分大小写的BLOB。
  
    BLOB和TEXT类型之间的唯一区别在于对BLOB值进行排序和比较时区分大小写，对TEXT值不区分大小写。

17. LIKE声明中的％和_是什么意思？
    
    ％对应于0个或更多字符，_只是LIKE语句中的一个字符。

18. 查看表A中的所有索引：show index from A;

19. CHAR和VARCHAR的区别？
    
    1.CHAR和VARCHAR类型在存储和检索方面有所不同

    2.CHAR列长度固定为创建表时声明的长度，长度值范围是1到255
  
    当CHAR值被存储时，它们被用空格填充到特定长度，检索CHAR值时需删除尾随空格。

21. drop,delete,truncate的区别

    drop:
    用于删除整个表的操作，包括表结构和数据，表将被完全移除，意味着无法再访问其中的数据，且表结构也将被销毁；需要谨慎使用，因为执行后无法撤销；

    delete:
    用于删除表中符合条件的数据行，而不删除表本身或结构。通常配合where子句，根据特定条件从表中删除记录，若不指定条件将删除整个表中的所有记录。

    truncate:
    也用于清空表中的数据，与delete不同的是，可一次性删除整个表的数据，而不需要指定特定的条件。执行的效率通常比delete高，因为truncate直接删除整个表的数据，而delete需要逐条删除数据。
