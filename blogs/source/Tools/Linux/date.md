Linux - 时间(date 设置系统时间)

---

> date: 以给定的格式显示当前的时间，或设置系统时间；
>
> crontab -e -> `* */1 * * * ntpdate -u ntp1.aliyun.com`

1. 命令参数

   ```shell
   date [-u|--utc|--universal] [MMDDhhmm[[CC]YY][.ss]]
   -d, --date='' 显示字符串描述的时间
   -f, --file=DATEFILE 显示 DATEFILE 文件中的每行时间
   -r, --reference=文件 显示文件被修改的最后时间
   -s, --set='' 通过字符串设置时间
   -u, --utc, --universal 时间显示格式是uct格式，默认是cst格式
   -R, --rfc-2822, --rfc-3339=TIMESPEC 以RFC-2822格式输出日期和时间, 以RFC-3339格式输出日期和时
   --help
   --version
   ```

   `--date=string` 是一个大部分自由格式的可读日期字符串。日期字符串可以包含指示日历日期、日期时间、时区、星期几、相对时间、相对日期和数字的项。空字符串表示一天的开始。

2. 示例

   ```shell
   date // 显示当前时间
   date -d "next Thursday"        //显示今天之后的，下一个周四
   date -d "Thu"             //显示今天之后的，下一个周四
   date -d now // 显示当前时间
   date -d "2004-02-29" //只把日期按照指定格式输出
   date -d 16:21:42 //只把时间按照指定格式输出
   date -d "2004-02-29 16:21:42" //把指定日期和时间都按CST格式输出
   
   date -f client.c  //查看当前文件内的每行的时间
   
   date -R //可以查看时区
   date --rfc-3339="date" //--rfc-3339有效的参数
   date --rfc-3339="ns" //--rfc-3339有效的参数
   date --rfc-3339="seconds" //--rfc-3339有效的参数
   
   date -u //把当前日期和时间都按CST格式输出
   
   date -s "2019-05-29 10:58:00"    //设置时候，尽量比当前时间快1分钟
   date -s 10:58:00
   timedatectl set-time 08:30:00
   
   date --date=20140506 +%s // 获取一个特定时间的unix时间戳
   date +%s // 获取当前时间的unix时间戳
   date +%Y-%m-%d
   date +'%Y-%m-%d %H:%M:%S'
   ```

3. 格式参数的解释说明

   | 参数           | 描述                                                         | 举例          | 结果显示                           |
   | -------------- | ------------------------------------------------------------ | ------------- | ---------------------------------- |
   | %%             | 一个文字的 %；打印出%                                        |               |                                    |
   | %a             | 当前locale 的星期名缩写(例如： 日，代表星期日)               | date +%a      | 日                                 |
   | %A             | 当前locale 的星期名全称 (如：星期日)                         | date +%A      | 星期日                             |
   | %b             | 当前locale 的月名缩写 (如：5月，代表5月)                     | date +%b      | 5月                                |
   | %B             | 当前locale 的月名全称                                        | date +%B      | 五月                               |
   | %c             | 当前locale 的日期和时间 (如：2005年3月3日 星期四 23:05:25)   | date +%c      | 2019年05月29日 星期三 11时15分15秒 |
   | %C             | 世纪；比如 %Y，通常为省略当前年份的后两位数字(例如：20)      | date +%C      | 20                                 |
   | %d             | 按月计的日期(例如：01)                                       | date +%d      | 29                                 |
   | %D             | 按月计的日期；等于%m/%d/%y                                   | date +%D      | 05/29/19                           |
   | %e             | 按月计的日期，添加空格，等于%_d                              | date +%e      | 29                                 |
   | %F             | 完整日期格式，等价于 %Y-%m-%d                                | date +%F      | 2019-05-29                         |
   | %g             | ISO-8601 格式年份的最后两位 (参见%G)                         | date +%g      | 19                                 |
   | %G             | ISO-8601 格式年份 (参见%V)，一般只和 %V 结合使用             | date +%G      | 2019                               |
   | %h             | 等于%b                                                       | date +%h      | 5月                                |
   | %H             | 小时(00-23)                                                  | date +%H      | 11                                 |
   | %I             | 小时(00-12)                                                  | date +%I      | 11                                 |
   | %j             | 按年计的日期(001-366)                                        | date +%j      | 149                                |
   | %k             | 24小时制：hour, space padded ( 0..23); same as %_H           | date +%k      | 11                                 |
   | %l             | 12小时制：hour, space padded ( 1..12); same as %_I           | date +%l      | 11                                 |
   | %m             | month (01..12)                                               | # date +%m    | 05                                 |
   | %M             | minute (00..59)                                              | # date +%M    | 25                                 |
   | %N             | 纳秒(000000000-999999999)                                    | date +%N      | 277406266                          |
   | %p             | 当前locale 下的"上午"或者"下午"，未知时输出为空              | # date +%p    | 上午                               |
   | %P             | 与%p 类似，但是输出小写字母                                  | # date +%P    | 上午                               |
   | %r             | 当前 locale 下的 12 小时时钟时间 (如：11:11:04 下午)         | # date +%r    | 上午 11时25分39秒                  |
   | %R             | 24 小时时间的时和分，等价于 %H:%M                            | #date +%R     | 11:25                              |
   | %s             | 自UTC 时间 1970-01-01 00:00:00 以来所经过的秒数              | # date +%s    | 1559100350                         |
   | %S             | 秒(00-60)                                                    | # date +%S    | 55                                 |
   | %T             | 时间，等于%H:%M:%S                                           | # date +%T    | 11:26:00                           |
   | %u             | 星期，1 代表星期一                                           | # date +%u    | 3                                  |
   | %U             | 一年中的第几周，以周日为每星期第一天(00-53)                  | #date +%U     | 21                                 |
   | %V             | ISO-8601 格式规范下的一年中第几周，以周一为每星期第一天(01-53) | #date +%V     | 22                                 |
   | %w             | 一星期中的第几日(0-6)，0 代表周日                            | #date +%w     | 3                                  |
   | %W             | 一年中的第几周，以周一为每星期第一天(00-53)                  | #date %W      | 21                                 |
   | %x             | 当前locale 下的日期描述 (如：12/31/99)                       | # date +%x    | 2019年05月29日                     |
   | %X             | 当前locale 下的时间描述 (如：23:13:48)                       | # date +%X    | 11时26分21秒                       |
   | %y             | 年份最后两位数位 (00-99)                                     | # date +%y    | 19                                 |
   | %Y             | 年份                                                         | # date +%Y    | 2019                               |
   | %z +hhmm       | 数字时区(例如，-0400)                                        | # date +%z    | +0800                              |
   | %:z +hh:mm     | 数字时区(例如，-04:00)                                       | # date +%:z   | +08:00                             |
   | %::z +hh:mm:ss | 数字时区(例如，-04:00:00)                                    | # date +%::z  | +08:00:00                          |
   | %:::z          | 数字时区带有必要的精度 (例如，-04，+05:30)                   | # date +%:::z | +08                                |
   | %Z             | 按字母表排序的时区缩写 (例如，EDT)                           | # date +%Z    | CST                                |
   | %n             | 换行                                                         |               |                                    |
   | %t             | 输出制表符 Tab                                               |               |                                    |

   

   